<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>shhh</title>
<style>
  body { background-color: #111; color: #eee; font-family: sans-serif; margin: 0; padding: 2rem; user-select: none; }
  .hidden { display: none; }
  input, button { background: #222; color: #eee; border: 1px solid #444; padding: 0.5rem; }
  #chat { margin-top: 1rem; border: 1px solid #444; height: 60vh; overflow-y: auto; padding: 1rem; }
  .message { background: #222; padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem; animation: fadeout 30s forwards; }
  @keyframes fadeout { from { opacity: 1; } to { opacity: 0; } }
</style>
  <!-- Apple PWA + Safari enhancements -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Daren Prince">
  <meta name="format-detection" content="telephone=no">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon-180.png">
  <link rel="apple-touch-icon" sizes="167x167" href="assets/icons/apple-touch-icon-167.png">
  <link rel="apple-touch-icon" sizes="152x152" href="assets/icons/apple-touch-icon-152.png">
  <link rel="apple-touch-icon" sizes="120x120" href="assets/icons/apple-touch-icon-120.png">
  <link rel="mask-icon" href="assets/icons/safari-pinned-tab.svg" color="#7dde5b">
  <meta name="theme-color" content="#111217">
  <meta name="msapplication-TileColor" content="#111217">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-2048x2732.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-1668x2388.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-1536x2048.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-1290x2796.png" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-1179x2556.png" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-1170x2532.png" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-1242x2688.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-1242x2208.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-1125x2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-828x1792.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-750x1334.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/icons/apple-splash-640x1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <!-- End Apple PWA + Safari enhancements -->
</head>
<body class="theme-dark secret-chat">
<div id="login">
  <p>This private chat room requires a password. Messages vanish after 30 seconds. Copy/paste and screenshots are disabled for privacy.</p>
  <input type="password" id="password" placeholder="Password">
  <button id="enter">Enter</button>
</div>
<div id="chatInterface" class="hidden">
  <p>Welcome. Messages disappear after 30 seconds and cannot be copied or captured.</p>
  <div id="chat"></div>
  <input type="text" id="msgInput" placeholder="Type your message...">
  <button id="send">Send</button>
</div>
<script type="module">
import supabase from './supabase/client.js';

const correct = 'Gr@ndCh3r0k33';
const login = document.getElementById('login');
const chatInterface = document.getElementById('chatInterface');
let channel;

document.getElementById('enter').addEventListener('click', async () => {
  const pass = document.getElementById('password').value;
  if (pass === correct) {
    login.classList.add('hidden');
    chatInterface.classList.remove('hidden');
    if (!supabase) {
      console.error('Supabase client not configured');
      return;
    }
    channel = supabase.channel('shhh-room', { config: { broadcast: { self: false } } });
    channel.on('broadcast', { event: 'message' }, payload => addMessage(payload.text));
    await channel.subscribe();
  } else {
    alert('Incorrect password');
  }
});

function addMessage(text){
  const div = document.createElement('div');
  div.className = 'message';
  div.textContent = text;
  document.getElementById('chat').appendChild(div);
  setTimeout(() => { div.remove(); }, 30000);
}

document.getElementById('send').addEventListener('click', async () => {
  const input = document.getElementById('msgInput');
  const text = input.value.trim();
  if (text && channel) {
    addMessage(text);
    await channel.send({ type: 'broadcast', event: 'message', payload: { text } });
    input.value = '';
  }
});

document.addEventListener('copy', e => e.preventDefault());
document.addEventListener('cut', e => e.preventDefault());
document.addEventListener('paste', e => e.preventDefault());
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('keydown', e => {
  if ((e.ctrlKey || e.metaKey) && ['c', 'v', 'x', 'a', 'p'].includes(e.key.toLowerCase())) {
    e.preventDefault();
  }
  if (e.key === 'PrintScreen') {
    e.preventDefault();
  }
  if ((e.ctrlKey || e.metaKey) && e.shiftKey && ['3', '4'].includes(e.key)) {
    e.preventDefault();
  }
});

</script>
  <footer class="site-footer">
    <div class="container footer-grid">
      <div>
        <img src="assets/logos/logo-footer-white.png" alt="Daren Prince" class="footer-logo">
      </div>
      <div>
        <h4>Explore</h4>
        <ul class="footer-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="book.html">Book</a></li>
          <li><a href="meet-daren-prince.html">Meet Daren</a></li>
          <li><a href="components.html">Components</a></li>
          <li><a href="press.html">Press</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div>
      <div>
        <h4>Connect</h4>
        <ul class="footer-links">
          <li><a href="#">Instagram</a></li>
          <li><a href="#">Twitter</a></li>
          <li><a href="#">YouTube</a></li>
        </ul>
      </div>
      <div>
        <p>&copy; 2025 Daren Prince. All rights reserved.</p>
      </div>
    </div>
  </footer>
  <script type="module" src="./js/seo-indexing.js"></script>
</body>
</html>
