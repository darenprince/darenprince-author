<!DOCTYPE html>
<html data-site-root="darenprince-author" lang="en">
<head>
  <script>
    (function () {
      const html = document.documentElement;
      const explicitRoot = html.getAttribute('data-site-root');
      const host = window.location.hostname || '';
      const pathSegments = window.location.pathname.split('/').filter(Boolean);
      const normalizedExplicit = explicitRoot ? explicitRoot.trim().replace(/^\/+|\/+$/g, '') : '';
      let prefix = '';
      if (normalizedExplicit) {
        prefix = '/' + normalizedExplicit;
      } else if (host.endsWith('.github.io') && pathSegments.length) {
        prefix = '/' + pathSegments[0];
      }
      const firstSegment = pathSegments[0] || '';
      const shouldUsePrefix =
        Boolean(prefix) &&
        (host.endsWith('.github.io') ? Boolean(pathSegments.length) : firstSegment === normalizedExplicit);
      if (!shouldUsePrefix || prefix === '/') {
        html.dataset.assetPrefix = '';
        return;
      }
      if (prefix.endsWith('/')) {
        prefix = prefix.slice(0, -1);
      }
      html.dataset.assetPrefix = prefix;
      const URL_ATTRS = new Map([
        ['A', ['href']],
        ['LINK', ['href']],
        ['SCRIPT', ['src']],
        ['IMG', ['src', 'srcset']],
        ['SOURCE', ['src', 'srcset']],
        ['VIDEO', ['src', 'poster']],
        ['AUDIO', ['src']],
        ['IFRAME', ['src']],
        ['USE', ['href', 'xlink:href']],
        ['FORM', ['action']],
      ]);
      const shouldIgnore = (value) =>
        !value || /^(?:[a-z]+:|\/\/|#|data:|mailto:|tel:)/i.test(value);
      const resolve = (value) => {
        if (!value || shouldIgnore(value)) return value;
        if (value === prefix || value.startsWith(prefix + '/')) {
          return value;
        }
        if (value.startsWith('/')) {
          return prefix + value;
        }
        return value;
      };
      const patchSrcset = (value) =>
        value
          .split(',')
          .map((chunk) => {
            const parts = chunk.trim().split(/\s+/);
            if (!parts.length || !parts[0]) {
              return chunk;
            }
            parts[0] = resolve(parts[0]);
            return parts.join(' ');
          })
          .join(', ');
      const patchNode = (node) => {
        if (!node || node.nodeType !== Node.ELEMENT_NODE) return;
        const attrs = URL_ATTRS.get(node.tagName);
        if (!attrs) return;
        for (const attr of attrs) {
          const current = node.getAttribute(attr);
          if (!current) continue;
          if (attr === 'srcset') {
            const next = patchSrcset(current);
            if (next !== current) {
              node.setAttribute(attr, next);
            }
            continue;
          }
          const next = resolve(current);
          if (next === current) continue;
          if (node.tagName === 'SCRIPT' && attr === 'src') {
            const replacement = document.createElement('script');
            node.getAttributeNames().forEach((name) => {
              if (name === 'src') return;
              replacement.setAttribute(name, node.getAttribute(name));
            });
            replacement.src = next;
            if (node.parentNode) {
              node.parentNode.insertBefore(replacement, node.nextSibling);
            } else {
              document.head.appendChild(replacement);
            }
            node.remove();
          } else {
            node.setAttribute(attr, next);
          }
        }
      };
      const patchSubtree = (root) => {
        if (!root || !root.querySelectorAll) return;
        URL_ATTRS.forEach((_, tag) => {
          root.querySelectorAll(tag.toLowerCase()).forEach(patchNode);
        });
      };
      const observer = new MutationObserver((records) => {
        records.forEach((record) => {
          record.addedNodes.forEach((added) => {
            if (added.nodeType === Node.ELEMENT_NODE) {
              patchNode(added);
              if (added.querySelectorAll) {
                added.querySelectorAll('*').forEach(patchNode);
              }
            }
          });
        });
      });
      observer.observe(document.documentElement, { childList: true, subtree: true });
      const finalize = () => {
        patchSubtree(document);
        observer.disconnect();
      };
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', finalize, { once: true });
      } else {
        finalize();
      }
    })();
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Duck Calls | One-Time Secret Messaging</title>
  <meta
    name="description"
    content="Duck Calls is a one-time secret message platform powered by OneTimeSecret. Generate self-destructing links, verify API status, and retrieve secrets securely in one client-only cockpit."
  />
  <meta property="og:title" content="Duck Calls | One-Time Secret Messaging" />
  <meta
    property="og:description"
    content="Create self-destructing links, validate OneTimeSecret status, and retrieve secrets once with the Duck Calls client-only platform."
  />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.darenprince.com/ots.html" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Duck Calls | One-Time Secret Messaging" />
  <meta
    name="twitter:description"
    content="Create self-destructing links, validate OneTimeSecret status, and retrieve secrets once with the Duck Calls client-only platform."
  />
  <meta name="theme-color" content="#050612" />
  <link rel="canonical" href="https://www.darenprince.com/ots.html" />
  <link rel="stylesheet" href="/assets/styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@100;200;300;400;500;600;700;800;900&family=Geist:wght@100;200;300;400;500;600;700;800;900&family=IBM+Plex+Mono:wght@100;200;300;400;500;600;700&family=IBM+Plex+Sans:wght@100;200;300;400;500;600;700&family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Nunito:wght@200;300;400;500;600;700;800;900&family=PT+Serif:wght@400;700&family=Roboto+Slab:wght@100;200;300;400;500;600;700;800;900&family=Roboto:wght@100;300;400;500;700;900&family=Shantell+Sans:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <link rel="icon" type="image/x-icon" href="/assets/icons/generated/favicon.ico" />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/generated/favicon-16x16.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/generated/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="48x48" href="/assets/icons/generated/favicon-48x48.png" />
  <link rel="manifest" href="/assets/icons/generated/manifest.webmanifest" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="application-name" content="Daren Prince" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/generated/apple-touch-icon-180x180.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Daren Prince" />
  <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>

  <style>
    :root {
      --background: #050612;
      --foreground: #e6f0ff;
      --border: #00000014;
      --input: #0b1220;
      --primary: #7c5cff;
      --primary-foreground: #ffffff;
      --secondary: #0b1b2b;
      --secondary-foreground: #cfe8ff;
      --muted: #0e1622;
      --muted-foreground: #9aa8c3;
      --success: #1fd39a;
      --success-foreground: #04231a;
      --accent: #5df0ff;
      --accent-foreground: #022028;
      --destructive: #ff6b6b;
      --destructive-foreground: #2a0b0b;
      --warning: #ffc857;
      --warning-foreground: #2a1a00;
      --card: #061022;
      --card-foreground: #dcebff;
      --sidebar: #071226;
      --sidebar-foreground: #bfd7ff;
      --sidebar-primary: #7c5cff;
      --sidebar-primary-foreground: #ffffff;
      --radius-sm: 4px;
      --radius-md: 6px;
      --radius-lg: 8px;
      --radius-xl: 12px;
      --font-family-body: Inter, "Space Grotesk", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: var(--font-family-body);
      background:
        radial-gradient(circle at 50% 0%, rgba(127, 93, 255, 0.15), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(60, 203, 255, 0.1), transparent 50%),
        var(--background);
      color: var(--foreground);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    button {
      font-family: inherit;
    }

    .export-wrapper {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .page-shell {
      width: 100%;
      max-width: 1440px;
      padding: 24px 48px 80px;
      display: flex;
      flex-direction: column;
      gap: 80px;
    }

    .top-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 24px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .brand-mark {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at 30% 0%, var(--accent) 0%, var(--primary) 55%, #050814 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 4px 16px rgba(127, 93, 255, 0.25);
    }

    .brand-title {
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 0.01em;
    }

    .nav-menu {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 4px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 999px;
    }

    .nav-item {
      padding: 8px 16px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 500;
      color: var(--muted-foreground);
      transition: color 0.2s, background 0.2s;
    }

    .nav-item.active {
      background: rgba(255, 255, 255, 0.08);
      color: var(--foreground);
      font-weight: 600;
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--muted-foreground);
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--success);
      box-shadow: 0 0 8px rgba(39, 212, 165, 0.6);
    }

    .hero-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 40px;
      max-width: 980px;
      margin: 0 auto;
      position: relative;
    }

    .hero-top {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 24px;
    }

    .feature-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(127, 93, 255, 0.1);
      border: 1px solid rgba(127, 93, 255, 0.3);
      color: #cbb7ff;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .main-headline {
      font-size: clamp(2.8rem, 5vw, 4.6rem);
      line-height: 1.05;
      font-weight: 700;
      letter-spacing: -0.04em;
      margin: 0;
      background: linear-gradient(180deg, #ffffff 20%, rgba(255, 255, 255, 0.6) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .main-subtext {
      font-size: 18px;
      line-height: 1.6;
      color: var(--muted-foreground);
      max-width: 620px;
      margin: 0;
    }

    .cta-group {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .btn-primary,
    .btn-secondary {
      height: 52px;
      padding: 0 32px;
      border-radius: 14px;
      font-size: 15px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      border: none;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .btn-primary {
      background: var(--foreground);
      color: var(--background);
      box-shadow: 0 12px 24px rgba(10, 12, 25, 0.45);
    }

    .btn-primary:hover,
    .btn-secondary:hover {
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--foreground);
    }

    .dashboard-preview {
      width: 100%;
      max-width: 940px;
      border-radius: 24px;
      background: rgba(13, 16, 33, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 32px 64px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      padding: 4px;
    }

    .preview-inner {
      background: linear-gradient(180deg, rgba(20, 25, 48, 0.6) 0%, rgba(10, 12, 25, 0.9) 100%);
      border-radius: 20px;
      padding: 40px;
      display: flex;
      flex-direction: column;
      gap: 32px;
    }

    .panel-header {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: flex-end;
      justify-content: space-between;
      padding-bottom: 24px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }

    .panel-titles h3 {
      font-size: 20px;
      font-weight: 600;
      margin: 0 0 8px 0;
      color: var(--foreground);
    }

    .panel-titles p {
      font-size: 13px;
      color: var(--muted-foreground);
      margin: 0;
    }

    .grid-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 32px;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .control-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted-foreground);
      font-weight: 600;
    }

    .input-box {
      position: relative;
      height: 48px;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      display: flex;
      align-items: center;
      padding: 0 14px;
      color: var(--foreground);
    }

    .input-box select {
      appearance: none;
      background: transparent;
      border: none;
      color: inherit;
      width: 100%;
      font-size: 14px;
      font-family: inherit;
      outline: none;
    }

    .input-box iconify-icon {
      position: absolute;
      right: 14px;
      color: var(--muted-foreground);
      pointer-events: none;
    }

    .action-row {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .method-badge {
      height: 36px;
      padding: 0 16px;
      background: rgba(127, 93, 255, 0.15);
      border: 1px solid rgba(127, 93, 255, 0.4);
      color: #d5daff;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      cursor: pointer;
    }

    .method-badge.inactive {
      background: transparent;
      border-color: rgba(255, 255, 255, 0.1);
      color: var(--muted-foreground);
      cursor: default;
    }

    .console-block {
      background: #05070f;
      border-radius: 12px;
      padding: 16px 20px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      align-items: center;
      gap: 12px;
      font-family: "IBM Plex Mono", "SF Mono", monospace;
      font-size: 13px;
      color: var(--success);
      flex-wrap: wrap;
    }

    .console-state {
      margin-left: auto;
      color: var(--muted-foreground);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .console-state.is-error {
      color: var(--destructive);
    }

    .command-section {
      display: flex;
      flex-direction: column;
      gap: 32px;
    }

    .section-header {
      display: flex;
      flex-direction: column;
      gap: 10px;
      text-align: left;
    }

    .section-header h2 {
      margin: 0;
      font-size: 28px;
    }

    .section-header p {
      margin: 0;
      color: var(--muted-foreground);
      max-width: 720px;
      line-height: 1.6;
    }

    .command-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
    }

    .panel-card {
      background: rgba(13, 16, 33, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      padding: 28px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .panel-card h3 {
      margin: 0;
      font-size: 20px;
    }

    .panel-card p {
      margin: 0;
      color: var(--muted-foreground);
      line-height: 1.6;
      font-size: 14px;
    }

    .form-grid {
      display: grid;
      gap: 16px;
    }

    .field-row {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    }

    .field label {
      display: block;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted-foreground);
      font-weight: 600;
      margin-bottom: 6px;
    }

    .field input,
    .field select,
    .field textarea {
      width: 100%;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 12px 14px;
      color: var(--foreground);
      font-family: inherit;
      font-size: 14px;
    }

    .field textarea {
      min-height: 140px;
      resize: vertical;
    }

    .toggle-row {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 13px;
      color: var(--muted-foreground);
    }

    .status-box {
      background: rgba(5, 7, 15, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      padding: 14px 16px;
      font-size: 13px;
      color: var(--muted-foreground);
    }

    .status-box.is-error {
      border-color: rgba(255, 107, 107, 0.4);
      color: #ffbdbd;
    }

    .output-list {
      display: grid;
      gap: 12px;
    }

    .output-item {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: space-between;
      background: rgba(8, 12, 15, 0.9);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      padding: 12px 14px;
      color: #b9f2ff;
      font-size: 13px;
      word-break: break-word;
    }

    .output-item code {
      font-family: "IBM Plex Mono", "SF Mono", monospace;
      color: inherit;
    }

    .copy-button {
      background: rgba(127, 93, 255, 0.2);
      border: 1px solid rgba(127, 93, 255, 0.4);
      color: #e6ddff;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 11px;
      cursor: pointer;
    }

    .footer-note {
      margin-top: 48px;
      padding-top: 32px;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      color: var(--muted-foreground);
      font-size: 14px;
    }

    .footer-note a {
      color: #cbb7ff;
    }

    @media (max-width: 1024px) {
      .page-shell {
        padding: 24px;
      }

      .top-nav {
        flex-direction: column;
        align-items: flex-start;
      }

      .nav-menu {
        flex-wrap: wrap;
      }
    }

    @media (max-width: 720px) {
      .hero-section {
        text-align: left;
        align-items: flex-start;
      }

      .cta-group {
        justify-content: flex-start;
      }

      .preview-inner {
        padding: 24px;
      }

      .console-state {
        margin-left: 0;
      }
    }
  </style>
</head>
<body class="theme-dark">
  <div class="export-wrapper">
    <div class="page-shell">
      <nav class="top-nav">
        <div class="brand">
          <div class="brand-mark" data-media-type="banani-button">
            <iconify-icon icon="lucide:eye" style="font-size: 18px; color: #fff"></iconify-icon>
          </div>
          <div class="brand-title">Duck Calls</div>
        </div>

        <div class="nav-menu">
          <a class="nav-item active" href="#overview" data-media-type="banani-button">Overview</a>
          <a class="nav-item" href="#create" data-media-type="banani-button">Secret Flow</a>
          <a class="nav-item" href="#retrieve" data-media-type="banani-button">Retrieve</a>
          <a class="nav-item" href="#security" data-media-type="banani-button">Security</a>
        </div>

        <div class="nav-right">
          <div class="status-pill">
            <div class="status-dot"></div>
            Live Edge
          </div>
          <div
            style="
              width: 32px;
              height: 32px;
              border-radius: 50%;
              background: rgba(255, 255, 255, 0.1);
              display: flex;
              align-items: center;
              justify-content: center;
              cursor: pointer;
            "
            data-media-type="banani-button"
          >
            <iconify-icon icon="lucide:user" style="font-size: 16px; color: var(--foreground)"></iconify-icon>
          </div>
        </div>
      </nav>

      <main id="overview" class="hero-section">
        <div class="hero-top">
          <div class="feature-badge" data-media-type="banani-button">
            <iconify-icon icon="lucide:shield-check" style="font-size: 14px"></iconify-icon>
            Client-side Encryption
          </div>
          <h1 class="main-headline">Zero traces.<br />Pure control.</h1>
          <p class="main-subtext">
            Duck Calls wraps OneTimeSecret into a command deck. Spin up self-destructing links and
            pull them exactly once without shipping new backend code.
          </p>
          <div class="cta-group">
            <a class="btn-primary" href="#create" data-media-type="banani-button">
              Launch secret flow
              <iconify-icon icon="lucide:arrow-right" style="font-size: 18px"></iconify-icon>
            </a>
            <a class="btn-secondary" href="https://docs.onetimesecret.com/en/rest-api/" data-media-type="banani-button">
              View Documentation
            </a>
          </div>
        </div>

        <div class="dashboard-preview">
          <div class="preview-inner">
            <div class="panel-header">
              <div class="panel-titles">
                <h3>Region Sanity Check</h3>
                <p>Ping status endpoints to verify your edge connection.</p>
              </div>
              <div
                class="feature-badge"
                style="border-color: var(--success); color: var(--success); background: rgba(39, 212, 165, 0.1);"
              >
                200 OK &lt; 90ms
              </div>
            </div>

            <div class="grid-controls">
              <div class="control-group">
                <div class="control-label">Select Region</div>
                <div class="input-box" data-media-type="banani-button">
                  <select id="status-region">
                    <option value="https://us.onetimesecret.com/api" selected>US (us.onetimesecret.com)</option>
                    <option value="https://eu.onetimesecret.com/api">EU (eu.onetimesecret.com)</option>
                    <option value="https://onetimesecret.com/api">Default (legacy)</option>
                  </select>
                  <iconify-icon icon="lucide:chevron-down" style="font-size: 16px"></iconify-icon>
                </div>
              </div>
              <div class="control-group">
                <div class="control-label">Method</div>
                <div class="action-row">
                  <button class="method-badge" id="status-check" type="button" data-media-type="banani-button">
                    Check status
                  </button>
                  <div class="method-badge inactive" data-media-type="banani-button">POST /share</div>
                </div>
              </div>
            </div>

            <div class="console-block">
              <span style="color: var(--muted-foreground)">$</span>
              curl https://us.onetimesecret.com/v1/status
              <span class="console-state" id="status-output">READY</span>
            </div>
          </div>
        </div>
      </main>

      <section id="create" class="command-section">
        <div class="section-header">
          <h2>Secret Flow Command Deck</h2>
          <p>
            Trigger share links, configure TTL windows, and manage passphrases from one cockpit.
            Everything runs in-browser for GitHub Pages deployment.
          </p>
        </div>

        <div class="command-grid">
          <div class="panel-card">
            <div>
              <h3>Create a One-Time Secret</h3>
              <p>
                Authenticate when available to unlock higher limits. Duck Calls uses Basic Auth only
                in your browser session.
              </p>
            </div>
            <form class="form-grid" id="create-form">
              <div class="field">
                <label for="api-base">API base URL</label>
                <select id="api-base">
                  <option value="https://us.onetimesecret.com/api" selected>US (recommended)</option>
                  <option value="https://eu.onetimesecret.com/api">EU</option>
                  <option value="https://onetimesecret.com/api">Default (legacy)</option>
                </select>
              </div>

              <div class="field-row">
                <div class="field">
                  <label for="auth-user">Username (email)</label>
                  <input
                    id="auth-user"
                    type="email"
                    placeholder="you@example.com"
                    autocomplete="email"
                    value="daren.prince@gmail.com"
                  />
                </div>
                <div class="field">
                  <label for="auth-token">API token</label>
                  <input id="auth-token" type="password" placeholder="API token" autocomplete="off" />
                </div>
              </div>

              <label class="toggle-row" for="auth-toggle">
                <input id="auth-toggle" type="checkbox" checked />
                Use authenticated access (default: daren.prince@gmail.com)
              </label>

              <div class="field">
                <label for="secret-message">Secret message</label>
                <textarea id="secret-message" placeholder="Drop the secret, credentials, or message."></textarea>
              </div>

              <div class="field-row">
                <div class="field">
                  <label for="secret-passphrase">Passphrase (optional)</label>
                  <input id="secret-passphrase" type="text" placeholder="Extra lock" />
                </div>
                <div class="field">
                  <label for="secret-ttl">TTL</label>
                  <input id="secret-ttl" type="number" min="60" value="3600" />
                </div>
                <div class="field">
                  <label for="secret-ttl-unit">TTL Unit</label>
                  <select id="secret-ttl-unit">
                    <option value="seconds" selected>Seconds</option>
                    <option value="minutes">Minutes</option>
                    <option value="hours">Hours</option>
                    <option value="days">Days</option>
                  </select>
                </div>
              </div>

              <div class="cta-group" style="justify-content: flex-start;">
                <button class="btn-primary" type="submit">
                  Create Secret
                  <iconify-icon icon="lucide:lock-keyhole" style="font-size: 18px"></iconify-icon>
                </button>
                <button class="btn-secondary" type="reset">Reset</button>
              </div>
            </form>
            <div class="status-box" id="create-status" aria-live="polite">Waiting for payload.</div>
            <div class="output-list" id="create-output"></div>
          </div>

          <div class="panel-card" id="retrieve">
            <div>
              <h3>Retrieve a Secret</h3>
              <p>
                Only one retrieval attempt is allowed per secret key. If a passphrase was set,
                include it to unlock the payload.
              </p>
            </div>
            <form class="form-grid" id="retrieve-form">
              <div class="field">
                <label for="retrieve-base">API base URL</label>
                <select id="retrieve-base">
                  <option value="https://us.onetimesecret.com/api" selected>US (recommended)</option>
                  <option value="https://eu.onetimesecret.com/api">EU</option>
                  <option value="https://onetimesecret.com/api">Default (legacy)</option>
                </select>
              </div>

              <div class="field">
                <label for="secret-key">Secret key</label>
                <input id="secret-key" type="text" placeholder="Paste secret key" />
              </div>

              <div class="field">
                <label for="retrieve-passphrase">Passphrase (if required)</label>
                <input id="retrieve-passphrase" type="text" placeholder="Passphrase" />
              </div>

              <div class="cta-group" style="justify-content: flex-start;">
                <button class="btn-primary" type="submit">
                  Reveal Once
                  <iconify-icon icon="lucide:eye" style="font-size: 18px"></iconify-icon>
                </button>
                <button class="btn-secondary" type="reset">Clear</button>
              </div>
            </form>
            <div class="status-box" id="retrieve-status" aria-live="polite">Ready to decrypt.</div>
            <div class="output-list" id="retrieve-output"></div>
          </div>
        </div>
      </section>

      <section id="security" class="command-section">
        <div class="section-header">
          <h2>Security Briefing</h2>
          <p>
            Duck Calls is fully client-side for GitHub Pages deployment. Secrets and API credentials
            remain in your browser session only. For production workflows, prefer authenticated
            requests and region-specific endpoints.
          </p>
        </div>
        <div class="panel-card">
          <div class="command-grid">
            <div>
              <h3>Data locality</h3>
              <p>Use regional endpoints (US/EU) to satisfy compliance and latency requirements.</p>
            </div>
            <div>
              <h3>Single view only</h3>
              <p>Each secret burns after the first retrieval. Share links once.</p>
            </div>
            <div>
              <h3>Optional passphrases</h3>
              <p>Add a passphrase to secure sensitive payloads beyond the share URL.</p>
            </div>
          </div>
        </div>
        <div class="footer-note">
          Duck Calls is powered by OneTimeSecret and tailored for the Daren Prince platform. Visit
          the official <a href="https://docs.onetimesecret.com/en/rest-api/">REST API docs</a> for
          the latest endpoint guidance.
        </div>
      </section>
    </div>
  </div>

  <script>
    const statusOutput = document.getElementById('status-output');
    const statusRegion = document.getElementById('status-region');
    const statusButton = document.getElementById('status-check');
    const createForm = document.getElementById('create-form');
    const createStatus = document.getElementById('create-status');
    const createOutput = document.getElementById('create-output');
    const retrieveForm = document.getElementById('retrieve-form');
    const retrieveStatus = document.getElementById('retrieve-status');
    const retrieveOutput = document.getElementById('retrieve-output');

    const authToggle = document.getElementById('auth-toggle');
    const authUser = document.getElementById('auth-user');
    const authToken = document.getElementById('auth-token');

    const withBase = (base, path) => `${base.replace(/\/$/, '')}${path}`;

    const buildHeaders = () => {
      const headers = new Headers({
        Accept: 'application/json',
        'Content-Type': 'application/x-www-form-urlencoded',
      });
      if (authToggle.checked && authUser.value && authToken.value) {
        const encoded = btoa(`${authUser.value}:${authToken.value}`);
        headers.set('Authorization', `Basic ${encoded}`);
      }
      return headers;
    };

    const setStatus = (node, message, isError = false) => {
      node.textContent = message;
      node.classList.toggle('is-error', isError);
    };

    const syncAuthState = () => {
      const enabled = authToggle.checked;
      authUser.disabled = !enabled;
      authToken.disabled = !enabled;
      authUser.setAttribute('aria-disabled', String(!enabled));
      authToken.setAttribute('aria-disabled', String(!enabled));
    };

    const renderOutput = (container, payload) => {
      container.innerHTML = '';
      if (!payload) return;

      const fields = Array.isArray(payload) ? payload : [payload];
      fields.forEach(({ label, value, copyable }) => {
        const wrapper = document.createElement('div');
        wrapper.className = 'output-item';
        const code = document.createElement('code');
        code.textContent = `${label}: ${value}`;
        wrapper.appendChild(code);
        if (copyable) {
          const copyButton = document.createElement('button');
          copyButton.type = 'button';
          copyButton.className = 'copy-button';
          copyButton.textContent = 'Copy';
          copyButton.addEventListener('click', async () => {
            await navigator.clipboard.writeText(value);
            copyButton.textContent = 'Copied';
            setTimeout(() => {
              copyButton.textContent = 'Copy';
            }, 1200);
          });
          wrapper.appendChild(copyButton);
        }
        container.appendChild(wrapper);
      });
    };

    statusButton.addEventListener('click', async () => {
      setStatus(statusOutput, 'CHECKING...', false);
      try {
        const response = await fetch(withBase(statusRegion.value, '/v1/status'), {
          method: 'GET',
        });
        if (!response.ok) {
          throw new Error(`Status ${response.status}`);
        }
        const data = await response.json();
        setStatus(statusOutput, data.status || 'OK');
      } catch (error) {
        setStatus(statusOutput, 'ERROR', true);
      }
    });

    authToggle.addEventListener('change', syncAuthState);
    syncAuthState();

    createForm.addEventListener('submit', async (event) => {
      event.preventDefault();
      createOutput.innerHTML = '';
      const apiBase = document.getElementById('api-base').value;
      const secret = document.getElementById('secret-message').value.trim();
      const passphrase = document.getElementById('secret-passphrase').value.trim();
      const ttlValue = Number(document.getElementById('secret-ttl').value) || 0;
      const ttlUnit = document.getElementById('secret-ttl-unit').value;

      if (!secret) {
        setStatus(createStatus, 'Secret message is required.', true);
        return;
      }

      const unitMultiplier = {
        seconds: 1,
        minutes: 60,
        hours: 3600,
        days: 86400,
      };
      const ttl = ttlValue * unitMultiplier[ttlUnit];

      const body = new URLSearchParams({
        secret,
        ttl: String(ttl || 3600),
      });
      if (passphrase) {
        body.set('passphrase', passphrase);
      }

      setStatus(createStatus, 'Sending to OneTimeSecret...', false);

      try {
        const response = await fetch(withBase(apiBase, '/v1/share'), {
          method: 'POST',
          headers: buildHeaders(),
          body,
        });
        const data = await response.json();
        if (!response.ok) {
          throw new Error(data?.message || 'Request failed');
        }

        const shareBase = apiBase.replace(/\/api\/?$/, '');
        const shareUrl = data.secret_key ? `${shareBase}/secret/${data.secret_key}` : 'Unavailable';

        renderOutput(createOutput, [
          { label: 'Share URL', value: shareUrl, copyable: true },
          { label: 'Secret key', value: data.secret_key || 'Unavailable', copyable: true },
          { label: 'Metadata key', value: data.metadata_key || 'Unavailable', copyable: true },
          { label: 'TTL (seconds)', value: data.ttl || String(ttl), copyable: false },
        ]);
        setStatus(createStatus, 'Secret link generated. Share it once.', false);
      } catch (error) {
        setStatus(createStatus, `Failed to create secret. ${error.message}`, true);
      }
    });

    retrieveForm.addEventListener('submit', async (event) => {
      event.preventDefault();
      retrieveOutput.innerHTML = '';
      const apiBase = document.getElementById('retrieve-base').value;
      const secretKey = document.getElementById('secret-key').value.trim();
      const passphrase = document.getElementById('retrieve-passphrase').value.trim();

      if (!secretKey) {
        setStatus(retrieveStatus, 'Secret key is required.', true);
        return;
      }

      const body = new URLSearchParams();
      if (passphrase) {
        body.set('passphrase', passphrase);
      }

      setStatus(retrieveStatus, 'Retrieving secret...', false);

      try {
        const response = await fetch(withBase(apiBase, `/v1/secret/${secretKey}`), {
          method: 'POST',
          headers: new Headers({
            Accept: 'application/json',
            'Content-Type': 'application/x-www-form-urlencoded',
          }),
          body,
        });
        const data = await response.json();
        if (!response.ok) {
          throw new Error(data?.message || 'Request failed');
        }

        const secretValue = data.value || data.secret || data.secret_value || 'Secret retrieved';
        renderOutput(retrieveOutput, [
          { label: 'Secret', value: secretValue, copyable: true },
          { label: 'Secret key', value: data.secret_key || secretKey, copyable: true },
          { label: 'Metadata key', value: data.metadata_key || 'Unavailable', copyable: true },
          { label: 'Passphrase required', value: String(data.passphrase_required ?? 'unknown') },
        ]);
        setStatus(retrieveStatus, 'Secret unlocked. It will not be retrievable again.', false);
      } catch (error) {
        setStatus(retrieveStatus, `Unable to retrieve secret. ${error.message}`, true);
      }
    });
  </script>
</body>
</html>
